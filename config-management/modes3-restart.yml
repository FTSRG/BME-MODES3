---
- name: Apply configuration on master BeagleBones
  hosts: masters
  remote_user: debian
  gather_facts: no

  tasks:
      - name: Restarting masters
        shell: sleep 2 && shutdown -r now "Ansible updates triggered"
        async: 1
        poll: 0
        sudo: yes
        ignore_errors: true

      - name: Waiting for masters to boot up
        local_action: wait_for host={{ inventory_hostname }} port=22 state=started delay=15 timeout=60
