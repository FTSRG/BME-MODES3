plugins {
	id "org.xtext.xtend" version "1.0.0" apply false
	id "com.google.protobuf" version "0.8.0" apply false
}


tasks.withType(Test) {
	systemProperty "java.library.path", "/usr/local/lib"
}

subprojects {
	repositories {
		jcenter()
        mavenCentral()
		maven { url "https://repo.eclipse.org/content/groups/viatra2" }
	}
	
	plugins.withType(JavaPlugin) {
		dependencies {
			compile 'org.slf4j:slf4j-api:1.7.21'
			compile 'org.eclipse.xtend:org.eclipse.xtend.lib:2.9.0'
			
			testCompile 'junit:junit:4.12'
			testCompile "org.mockito:mockito-core:1.+"
		}
	}
	
	plugins.withType(org.xtext.gradle.XtendLanguagePlugin) {
		dependencies {
			compile 'org.eclipse.xtend:org.eclipse.xtend.lib:2.9.0'
		}
		
		sourceSets {
			main {
				java.srcDirs = ['src/main/java', 'src/main/xtext-gen']
				resources.srcDirs = ['src/main/resources', 'src/main/xtext-gen']
				xtendOutputDir = 'src/main/xtend-gen'
			}
			test {
				java.srcDirs = ['src/test/java', 'src/test/xtext-gen']
				resources.srcDirs = ['src/test/resources', 'src/test/xtext-gen']
				xtendOutputDir = 'src/test/xtend-gen'
			}
		}
	}
}
